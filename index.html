<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ ä¹ æƒ¯å…»æˆè¿½è¸ªå™¨ - é‡å»ºæ–°ç”Ÿæ´»</title>
    <style>
        :root {
            --primary-color-start: #4facfe;
            --primary-color-end: #00f2fe;
            --danger-color-start: #ff6b6b;
            --danger-color-end: #ee5a24;
            --success-color-start: #c3ec52;
            --success-color-end: #0ba360;
            --purple-grad-start: #667eea;
            --purple-grad-end: #764ba2;
            --light-grad-start: #a8edea;
            --light-grad-end: #fed6e3;
            --warm-grad-start: #ffecd2;
            --warm-grad-end: #fcb69f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--purple-grad-start) 0%, var(--purple-grad-end) 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header {
            background: linear-gradient(135deg, var(--primary-color-start) 0%, var(--primary-color-end) 100%);
            color: white; padding: 40px 30px; text-align: center; border-radius: 20px;
            margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative; overflow: hidden;
        }
        .header h1 { font-size: 3em; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); z-index: 1; position: relative; }
        .header p { font-size: 1.3em; opacity: 0.9; z-index: 1; position: relative; }

        .main-grid { display: grid; grid-template-columns: 1fr 350px; gap: 30px; margin-bottom: 30px; }
        .left-panel, .right-panel { display: flex; flex-direction: column; gap: 30px; }
        .card {
            background: white; border-radius: 20px; padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 20px 45px rgba(0,0,0,0.15); }
        .card-title { font-size: 1.8em; font-weight: bold; margin-bottom: 25px; color: #333; display: flex; align-items: center; gap: 10px; }

        .status-section { text-align: center; background: linear-gradient(135deg, var(--light-grad-start) 0%, var(--light-grad-end) 100%); }
        .days-counter { font-size: 4em; font-weight: bold; color: var(--primary-color-start); margin: 20px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); transition: filter 0.3s ease; }
        .status-text { font-size: 1.4em; margin-bottom: 15px; font-weight: 600; }

        .progress-ring { width: 200px; height: 200px; margin: 20px auto; position: relative; }
        .progress-ring svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .progress-ring-bg { fill: none; stroke: #e9ecef; stroke-width: 8; }
        .progress-ring-fill { fill: none; stroke: var(--primary-color-start); stroke-width: 8; stroke-linecap: round; stroke-dasharray: 565.48; stroke-dashoffset: 565.48; transition: stroke-dashoffset 0.5s ease; }
        .progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.5em; font-weight: bold; color: var(--primary-color-start); transition: filter 0.3s ease; }
        
        .checkin-section { background: linear-gradient(135deg, var(--success-color-start) 0%, var(--success-color-end) 100%); color: white; text-align: center; }
        .checkin-button { background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 20px 40px; border-radius: 50px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: all 0.3s ease; margin: 20px 0; }
        .checkin-button:hover { background: rgba(255,255,255,0.3); transform: translateY(-3px); }
        .checkin-button:disabled { background: rgba(255,255,255,0.9); color: var(--success-color-end); cursor: not-allowed; }

        .emergency-section { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); text-align: center; }
        .emergency-button { background: linear-gradient(135deg, var(--danger-color-start), var(--danger-color-end)); color: white; border: none; padding: 20px 40px; border-radius: 50px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 25px rgba(255,107,107,0.3); margin: 20px 0; }
        .emergency-button:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(255,107,107,0.4); }

        .heatmap-section { background: linear-gradient(135deg, var(--warm-grad-start) 0%, var(--warm-grad-end) 100%); }
        .heatmap-container { background: white; border-radius: 15px; padding: 20px; margin-top: 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.1); }
        .heatmap-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .heatmap-day { aspect-ratio: 1; border-radius: 8px; background: #f8f9fa; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; font-size: 0.9em; font-weight: bold; color: #333; border: 2px solid transparent; }
        .heatmap-day:not(.empty):hover { transform: scale(1.1); z-index: 10; box-shadow: 0 5px 15px rgba(0,0,0,0.2); cursor: pointer; }
        .heatmap-day.empty { background: transparent; }
        .heatmap-day.success { background: linear-gradient(135deg, var(--primary-color-start), var(--primary-color-end)); color: white; }
        .heatmap-day.failure { background: linear-gradient(135deg, var(--danger-color-start), var(--danger-color-end)); color: white; }
        .heatmap-day.today { border-color: var(--primary-color-start); animation: pulse 2s infinite; }
        @keyframes pulse { 50% { transform: scale(1.05); } }
        
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .stat-card { background: white; border-radius: 15px; padding: 25px; text-align: center; border-left: 5px solid var(--primary-color-start); }
        .stat-number { font-size: 2.5em; font-weight: bold; color: var(--primary-color-start); margin-bottom: 10px; transition: filter 0.3s ease; }
        .stat-label { color: #666; font-size: 1.1em; font-weight: 500; }

        .milestones-section { background: linear-gradient(135deg, var(--purple-grad-start), var(--purple-grad-end)); color: white; }
        .milestone-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 15px; transition: all 0.3s ease; }
        .milestone-item.completed { background: rgba(79, 172, 254, 0.3); border-left: 4px solid var(--primary-color-start); }
        .milestone-icon { font-size: 2em; }

        .quotes-section { background: linear-gradient(135deg, var(--warm-grad-start) 0%, var(--warm-grad-end) 100%); text-align: center; }

        .settings-section { background: linear-gradient(135deg, #e0c3fc 0%, #9bb5ff 100%); }
        .settings-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid rgba(0,0,0,0.1); }
        .settings-item:last-child { border-bottom: none; }
        .settings-toggle { width: 50px; height: 25px; background: #ccc; border-radius: 25px; position: relative; cursor: pointer; transition: all 0.3s ease; }
        .settings-toggle.active { background: var(--primary-color-start); }
        .settings-toggle::before { content: ''; position: absolute; width: 21px; height: 21px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: all 0.3s ease; }
        .settings-toggle.active::before { transform: translateX(25px); }
        .settings-btn { background: var(--primary-color-start); color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; transition: background 0.3s; }
        .settings-btn.danger { background: var(--danger-color-start); }
        .settings-btn:hover { filter: brightness(1.1); }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); justify-content: center; align-items: center; }
        .modal.show { display: flex; animation: fadeIn 0.3s ease; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; position: relative; animation: modalSlideIn 0.3s ease; text-align: center; }
        .close { position: absolute; right: 20px; top: 20px; font-size: 1.5em; cursor: pointer; color: #666; transition: color 0.3s ease; }
        .close:hover { color: var(--danger-color-start); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes modalSlideIn { from { transform: translateY(-50px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }

        .modal-title { font-size: 1.8em; margin-bottom: 20px; }
        .modal-actions { margin-top: 20px; display: flex; gap: 15px; justify-content: center; }
        .modal-btn { border: none; padding: 15px 30px; border-radius: 10px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .modal-btn.primary { background-color: var(--success-color-end); color: white; }
        .modal-btn.danger { background-color: var(--danger-color-end); color: white; }
        .modal-btn:hover { transform: translateY(-3px); filter: brightness(1.1); }

        .notification { position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, var(--primary-color-start), var(--primary-color-end)); color: white; padding: 15px 20px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); z-index: 1001; transform: translateX(120%); opacity: 0; transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        .notification.show { transform: translateX(0); opacity: 1; }

        .privacy-blur { filter: blur(5px); }

        @media (max-width: 1024px) {
            .main-grid { grid-template-columns: 1fr; }
            .right-panel { order: -1; }
        }
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸŒŸ ä¹ æƒ¯å…»æˆè¿½è¸ªå™¨</h1>
            <p>é‡å»ºæ–°ç”Ÿæ´»ï¼Œæ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹</p>
        </header>

        <div class="main-grid">
            <div class="left-panel">
                <div class="card status-section">
                    <div class="card-title">ğŸ“Š å½“å‰çŠ¶æ€</div>
                    <div class="days-counter" id="daysCounter">0</div>
                    <div class="status-text" id="statusText">ä»Šå¤©æ˜¯ä½ é‡æ–°å¼€å§‹çš„ç¬¬ä¸€å¤©</div>
                    <div class="progress-ring">
                        <svg><circle class="progress-ring-bg" cx="100" cy="100" r="90"></circle><circle class="progress-ring-fill" id="progressCircle" cx="100" cy="100" r="90"></circle></svg>
                        <div class="progress-text" id="progressText">0%</div>
                    </div>
                </div>
                <div class="card heatmap-section">
                    <div class="card-title">ğŸ”¥ æœ¬æœˆçƒ­åŠ›å›¾</div>
                    <div class="heatmap-container">
                        <div id="heatmapGrid"></div>
                    </div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-number" id="totalDays">0</div><div class="stat-label">æ€»åšæŒå¤©æ•°</div></div>
                    <div class="stat-card"><div class="stat-number" id="longestStreak">0</div><div class="stat-label">æœ€é•¿è¿ç»­</div></div>
                    <div class="stat-card"><div class="stat-number" id="currentStreak">0</div><div class="stat-label">å½“å‰è¿ç»­</div></div>
                    <div class="stat-card"><div class="stat-number" id="totalSuccessRate">0%</div><div class="stat-label">æ€»æˆåŠŸç‡</div></div>
                </div>
            </div>

            <div class="right-panel">
                <div class="card checkin-section">
                    <div class="card-title" style="color: white;">âœ… ä»Šæ—¥æ‰“å¡</div>
                    <p>ä»Šå¤©ä½ æˆåŠŸæ§åˆ¶äº†è‡ªå·±å—ï¼Ÿ</p>
                    <button class="checkin-button" id="checkinBtn" onclick="openCheckinModal()">ä»Šæ—¥æ‰“å¡</button>
                    <div id="checkinTime" style="opacity: 0.8; font-size: 0.9em; margin-top: 10px;"></div>
                </div>
                <div class="card emergency-section">
                    <div class="card-title">ğŸš¨ ç´§æ€¥æ±‚åŠ©</div>
                    <p>æ„Ÿåˆ°å†²åŠ¨éš¾ä»¥æ§åˆ¶ï¼Ÿç«‹å³å¯»æ±‚å¸®åŠ©ï¼</p>
                    <button class="emergency-button" onclick="openEmergencyModal()">ç´§æ€¥æ±‚åŠ©</button>
                </div>
                <div class="card milestones-section">
                    <div class="card-title" style="color: white;">ğŸ† é‡Œç¨‹ç¢‘</div>
                    <div id="milestonesContainer"></div>
                </div>
                <div class="card quotes-section">
                     <div class="card-title">ğŸ’­ æ¯æ—¥åŠ±å¿—</div>
                     <div id="quoteText" style="font-style: italic;"></div>
                </div>
                <div class="card settings-section">
                    <div class="card-title">âš™ï¸ è®¾ç½®</div>
                    <div class="settings-item">
                        <span>æ¯æ—¥æé†’ (æ™š9ç‚¹)</span>
                        <div class="settings-toggle" onclick="toggleSetting(this, 'reminder')"></div>
                    </div>
                    <div class="settings-item">
                        <span>éšç§æ¨¡å¼</span>
                        <div class="settings-toggle" onclick="toggleSetting(this, 'privacy')"></div>
                    </div>
                    <div class="settings-item">
                        <span>å¯¼å…¥æ•°æ®</span>
                        <button class="settings-btn" onclick="document.getElementById('fileImporter').click()">å¯¼å…¥</button>
                        <input type="file" id="fileImporter" style="display: none;" accept=".json" onchange="importData(event)">
                    </div>
                    <div class="settings-item">
                        <span>å¯¼å‡ºæ•°æ®</span>
                        <button class="settings-btn" onclick="exportData()">å¯¼å‡º</button>
                    </div>
                    <div class="settings-item">
                        <span>é‡ç½®æ‰€æœ‰æ•°æ®</span>
                        <button class="settings-btn danger" onclick="resetData()">é‡ç½®</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="emergencyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAllModals()">&times;</span>
            <h2 class="modal-title">ğŸ†˜ ç´§æ€¥æ±‚åŠ©æŒ‡å—</h2>
            <p>å½“ä½ æ„Ÿåˆ°å†²åŠ¨éš¾ä»¥æ§åˆ¶æ—¶ï¼Œè¯·ç«‹å³å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
            <ul style="text-align: left; margin
